{% extends 'base.html' %}
{% load static %}
{% block content %}


    {{ favourites | json_script:"fave-routes-data" }}


    <div id="user-page-container" class="container">

        <div class="row">
            <div id="user-page-item-container">
                <div class="well profile">
                    <div class="col-sm-12">
                        <div class="col-xs-8 col-sm-8">
                            <h2><b>Username:</b> {{ request.user }}</h2>
                        </div>
                    </div>
                    <div class="col-xs-12 divider text-center">
                        <div id="user-metrics-div">
                            <div class="col-xs-12 emphasis">
                                <h2><strong> 20,7K </strong></h2>
                                <p><small>Kilometers travelled</small></p>
                            </div>
                            <div class="col-xs-12 emphasis">
                                <h2><strong>245</strong></h2>
                                <p><small>Journeys Planned</small></p>
                            </div>
                        </div>

                        <div id="fav-journey-title">
                            <h2><b>Favourite Journeys</b></h2>
                        </div>

                        <div>

                            <table id="table" class="table-primary">

                                <thead>
                                <tr>
                                    <th scope="col">Origin</th>
                                    <th scope="col">Destination</th>
                                    <th scope="col"></th>
                                    <th scope="col"></th>
                                </tr>
                                </thead>
                                <tbody id="tbody">
                                {% csrf_token %}
                                {% for routes in user_routes %}
                                    <tr id="{{ routes.id }}">
                                        <td id="origin-fav-{{ routes.id }}">{{ routes.users_origin_stop }}</td>
                                        <td id="dest-fav-{{ routes.id }}"> {{ routes.users_dest_stop }} </td>
                                        <td>
                                            <button type="button" id="takeTripButton" class="btn btn-success"
                                                    onclick="takeTrip('{{ routes.users_origin_stop | escapejs }}', '{{ routes.users_dest_stop | escapejs }}')">
                                                take trip
                                            </button>
                                        </td>
                                        <td><input type="checkbox" name="route_id[]" value="{{ routes.id }}"></td>
                                    </tr>
                                {% endfor %}
                                </tbody>
                            </table>
                            {% if user_routes %}
                                <button type="button" id="delete_btn" class="btn btn-danger"
                                        onclick="RemoveFavRouteAlert()">Remove Route
                                </button>
                            {% endif %}
                        </div>
                    </div>
                </div>
            </div>
                {% csrf_token %}
           <button type="button" id="del_user_btn" value="{{ request.user.id }}" class="btn btn-danger" onclick="removeUserAlert()">Delete Account</button>
        </div>
    </div>

{% endblock %}